**计算机网络**
五层：应用、传输、网络、链路、物理
OSI七层：应用层、表示层、回话、传输、网络、数据链路、物理。

TCP和UDP的区别？
1.面向连接 2。面向报文 面向字节流 2.传输速度 3.安全性 4.传输数据的格式：报文段 数据报 

udp能否实现可靠连接？
可以。将可靠传输服务转移到应用层中实现。seq/ack机制；发送接收缓冲区：超时重传。

三次握手：SYN ACK

四次挥手：FIN ACK 第二次握手之后B可以继续向A分发数据
四次挥手的time_wait状态什么时候存在？为什么存在？为什么要等待两个时间周期？
答：不能保证最后的ack到达b 如果最后的ack丢失 b有发起fin重传的可能。

单播 多播 广播（一个服务端）

TCP和UDP能否发送0字节的数据包？TCP发送后接收方不会收到；UDP发送后，则可以。

**关于TCP粘包**

https://blog.csdn.net/weixin_41047704/article/details/85340311

1.流量控制：
解决*流水线*的差错恢复（关于发送序号和ACK回去给客户端）：
1.回退N步（GBN）
2.选择重传（SR）
（两者都有超时）

TCP的差错恢复（重传，关于发送ACK）：
1.超时间隔加倍
2.快速重传 3次冗余ACK

2.拥塞控制：
TCP的拥塞机制：（加性增 乘性减：AIMD）
1.慢启动
2.拥塞避免
3.快速恢复

MSS：最大报文段长度

MTU：最大传输单元（最后发送出去的报文大小）
（因为以太网数据帧的长度必须在46-1500字节之间 这个1500字节被称为链路层的MTU）

MTU包含MSS

描述HTTP协议：
超文本传输协议。应用层协议。使用tcp作为其传输层。
工作原理：

![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156484600640.jpg)


![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156487457359.jpg)


*DNS域名系统工作原理？*
dns要做的就是在用户输入域名之后，先到dns服务器查询ip地址，然后通过ip地址来访问站点。简单来说，就是将主机名解析为ip地址。

dns域名解析过程：
1.递归查询
2.迭代查询
直到得到最终的ip地址，再返回给主机。

**回顾：Web页面请求的过程**
1.便携机与网络相连，运行DHCP协议获得IP地址。
2.DHCP客户记录下它的IP地址和它的DNS服务器的IP地址
3.获得IP地址就可以开始键入。尝试生成TCP套接字发送HTTP请求。
不知道网址的IP，需要用到DNS查询。
期间不知道MAC地址的话使用ARP协议。
4.获得目的IP之后，开始先TCP三次握手。
5.发送HTTP请求报文，收到HTTP响应报文。读取到网页。
（后面还有释放tcp链接）

**http协议**

https://www.cnblogs.com/an-wen/p/11180076.html

1. http协议支持客户端/服务端模式，也是一种请求/响应模式的协议。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。
3. 灵活：HTTP允许传输任意类型的数据对象。传输的类型由Content-Type加以标记。
4. 无连接：限制每次连接只处理一个请求。服务器处理完请求，并收到客户的应答后，即断开连接，但是却不利于客户端与服务器保持会话连接，为了弥补这种不足，产生了两项记录http状态的技术，一个叫做Cookie,一个叫做Session。
5. 无状态：无状态是指协议对于事务处理没有记忆，后续处理需要前面的信息，则必须重传。

http协议是应用层协议，基于tcp/ip协议之上。
http是无状态保存的协议。每次连接只处理一个请求。
http的状态码：
2xx 成功；3xx 重定向；4xx 客户端错误；5xx 服务端错误。

GET和POST的区别：
get参数通过url传递 post参数被放在请求体
get在url传递的参数有限 post没有这个要求
get参数直接暴露在url中 没有post安全
get请求只能进行url编码 post支持多种编码方式
get产生一个TCP数据包 （header和data一起）post产生两个（分开）。

**http和https的区别**

https协议需要到CA申请证书，可能需要一定的费用
http是超文本传输协议，信息是明文传输。https则是具有安全性的ssl加密传输协议
http和https采用不同的连接方式，http用80端口，https用443端口
http连接简单，无状态。https使由http+SSL构建的可进行加密传输、身份认证的网络协议

**http传输步骤**

\1. 客户端连接到Web服务器
一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。例如，[http://www.baidu.com](http://www.baidu.com/)。

\2. 发送HTTP请求
通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。

\3. 服务器接受请求并返回HTTP响应
Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。

\4. 释放连接TCP连接
若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;

\5. 客户端浏览器解析HTML内容
客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。

![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156537933854.jpg)

**URL**

统一资源定位符。



tcp：
流量控制：滑动窗口
拥塞控制：慢启动、拥塞避免、快速回复。

tcp为什么是可靠的？怎么保证？
校验和，序列号，定时器，确认问答，快重传（三个冗余ACK则重新发送）



每台主机ARP缓冲区里面有ARP列表。本地网发起ARP请求的广播包。如果目的ip与自己的ip地址一致，就发送一个ARP响应包（单播应答）。

ICMP协议：因特网控制信息协议
功能：1.确认ip包是否成功到达目标地址
2.通知在发送过程中ip包被丢弃的原因

**三次握手中第三次失败怎么办？**
https://blog.csdn.net/qq_16320025/article/details/106373289

**四次挥手的原因**
https://github.com/CyC2018/CS-Notes/blob/master/notes/计算机网络%20-%20传输层.md#tcp-的四次挥手
https://blog.csdn.net/piexie8364/article/details/114536504

建立连接：
因为服务端在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。

关闭连接：
当收到对方的FIN报文时，仅表示对方不再发送数据但还能接收收据，我们也未必把全部数据都发给了对方，所以我们可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方表示同意关闭连接。因此我们的ACK和FIN一般会分开发送。

**ICMP协议的作用是什么？**
ICMP协议是TCP/IP协议的一个子协议。用在IP主机、路由器之间传递控制消息，控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。

这些控制消息虽然不传递用户数据，但是对于用户数据的传输起着重要的作用。

**关于数据链路层**
数据链路层(data link layer)通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。 在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装程帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。

