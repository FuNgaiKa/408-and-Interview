# 计算机网络

**计网复习提纲**

https://blog.csdn.net/qq_40769893/article/details/88361798



五层：应用、传输、网络、链路、物理
OSI七层：应用层、表示层、回话、传输、网络、数据链路、物理。

**TCP可靠传输服务**

1.无差错

2.按顺序交付

因此有：

1.序号、确认、定时器、超时重传。

2.流量控制

3.拥塞控制



TCP和UDP的区别？
1.面向连接 无连接2.面向数据报 面向字节流 2.传输速度 3.安全性 4.传输数据的格式：报文段 数据报 

udp能否实现可靠连接？
可以。将可靠传输服务转移到应用层中实现。seq/ack机制；发送接收缓冲区：超时重传。

（udp弱点：丢包、乱序）

三次握手：SYN ACK

**三次握手状态**

SYN-SENT,LISTEN,SYN-REVD,ESTABILISHED

**三次握手原因？**



**在UDP的基础上实现TCP的稳定？**

UDP要想可靠，就要接收方收到UDP之后回复个确认包，发送方有个机制，收不到确认包就要重新发送，每个包有递增的序号，接收方发现中间丢了包就要发重传请求，当网络太差时候频繁丢包，防止越丢包越重传的恶性循环，要有个发送窗口的限制，发送窗口的大小根据网络传输情况调整，调整算法要有一定自适应性。

即为在应用层上实现了TCP。

这样可以实现可靠传输，同时不会有拥塞控制和慢启动等“缺点”。

四次挥手：FIN ACK 第二次握手之后B可以继续向A分发数据

**四次挥手的time_wait状态什么时候存在？为什么存在？为什么要等待两个时间周期？**

答：不能保证最后的ack到达b 如果最后的ack丢失 b有发起fin重传的可能。



**关于TIME_WAIT**

https://blog.csdn.net/weixin_41966991/article/details/81264095

![img](https://img-blog.csdn.net/20180728185736249?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTk2Njk5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

FIN_WAIT,CLOSE_WAIT,LAST_ACK,TIME_WAIT

1.防止最后的ACK未能使得服务器端收到，保证TCP全双工连接的可靠释放。（不然服务器端重新发送的FIN会使得客户端TCP传输层发送RST重新建立连接）

2.为了使得数据包过期失效。

**三次握手中第三次失败怎么办？**
https://blog.csdn.net/qq_16320025/article/details/106373289

超时重发5次。如果没有收到确认或者受到了数据包，则发送RST重置包结束连接。



**四次挥手的原因**
https://github.com/CyC2018/CS-Notes/blob/master/notes/计算机网络%20-%20传输层.md#tcp-的四次挥手
https://blog.csdn.net/piexie8364/article/details/114536504

建立连接：
因为服务端在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。

关闭连接：
当收到对方的FIN报文时，仅表示对方不再发送数据但还能接收收据，我们也未必把全部数据都发给了对方，所以我们可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方表示同意关闭连接。因此我们的ACK和FIN一般会分开发送。







单播 多播 广播（一个服务端）

**TCP和UDP能否发送0字节的数据包？**

TCP发送后接收方不会收到；UDP发送后，则可以。



**TCP粘包**

“包”是应用层概念，TCP是面向字节流的协议。可以通过表示字节流头尾来解决；或者标识数据长度。

https://blog.csdn.net/weixin_41047704/article/details/85340311

**TCP可靠数据传输是怎么保证的？**

0.序列号，确认应答，超时重传。

**1.流量控制：**
解决*流水线*的差错恢复（关于发送序号和ACK回去给客户端）：
1.回退N步（GBN）
2.选择重传（SR）
（两者都有超时）

TCP的差错恢复（重传，关于发送ACK）：
1.超时间隔加倍
2.快速重传 3次冗余ACK

**2.拥塞控制：**
TCP的拥塞机制：（加性增 乘性减：AIMD）
1.慢启动
2.拥塞避免
3.快速恢复（两种；阈值变为当前窗口的一半；窗口大小变为要么阈值+3，要么变成1）

MSS：最大报文段长度

MTU：最大传输单元（最后发送出去的报文大小）
（因为以太网数据帧的长度必须在46-1500字节之间 这个1500字节被称为链路层的MTU）

MTU包含MSS





**描述HTTP协议：**
超文本传输协议。应用层协议。使用tcp作为其传输层。

特点：

1.简单快速

2.灵活

3.无连接

4.无状态



工作原理：

![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156484600640.jpg)


![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156487457359.jpg)


*DNS域名系统工作原理？*
dns要做的就是在用户输入域名之后，先到dns服务器查询ip地址，然后通过ip地址来访问站点。简单来说，就是将主机名解析为ip地址。

dns域名解析过程：
1.递归查询
2.迭代查询
直到得到最终的ip地址，再返回给主机。

**回顾：Web页面请求的过程**
1.便携机与网络相连，运行DHCP协议获得IP地址。
2.DHCP客户记录下它的IP地址和它的DNS服务器的IP地址
3.获得IP地址就可以开始键入。尝试生成TCP套接字发送HTTP请求。
不知道网址的IP，需要用到DNS查询。
期间不知道MAC地址的话使用ARP协议。
4.获得目的IP之后，开始先建立TCP套接字连接（根据IP地址和默认端口）。
5.发送HTTP请求报文，收到HTTP响应报文。读取到网页。
（后面还有释放tcp链接）



**浏览器中输入URL**

浏览器要将URL解析为IP地址，解析域名就要用到DNS协议，首先主机会查询DNS的缓存，如果没有就给本地DNS发送查询请求。DNS查询分为两种方式，一种是递归查询，一种是迭代查询。如果是迭代查询，本地的DNS服务器，向根域名服务器发送查询请求，根域名服务器告知该域名的一级域名服务器，然后本地服务器给该一级域名服务器发送查询请求，然后依次类推直到查询到该域名的IP地址。DNS服务器是基于UDP的，因此会用到UDP协议。



得到IP地址后，浏览器就要与服务器建立一个http连接。因此要用到http协议，http协议报文格式上面已经提到。http生成一个get请求报文，将该报文传给TCP层处理，所以还会用到TCP协议。如果采用https还会使用https协议先对http数据进行加密。TCP层如果有需要先将HTTP数据包分片，分片依据路径MTU和MSS。TCP的数据包然后会发送给IP层，用到IP协议。IP层通过路由选路，一跳一跳发送到目的地址。当然在一个网段内的寻址是通过以太网协议实现(也可以是其他物理层协议，比如PPP，SLIP)，以太网协议需要直到目的IP地址的物理地址，有需要ARP协议。



**http协议**

https://www.cnblogs.com/an-wen/p/11180076.html

1. http协议支持客户端/服务端模式，也是一种请求/响应模式的协议。
2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。
3. 灵活：HTTP允许传输任意类型的数据对象。传输的类型由Content-Type加以标记。
4. 无连接：限制每次连接只处理一个请求。服务器处理完请求，并收到客户的应答后，即断开连接，但是却不利于客户端与服务器保持会话连接，为了弥补这种不足，产生了两项记录http状态的技术，一个叫做Cookie,一个叫做Session。
5. 无状态：无状态是指协议对于事务处理没有记忆，后续处理需要前面的信息，则必须重传。

http协议是应用层协议，基于tcp/ip协议之上。
http是无状态保存的协议。每次连接只处理一个请求。
http的状态码：

1xx：指示信息（请求已接收，继续处理）

2xx 成功；3xx 重定向；4xx 客户端错误；5xx 服务端错误。

**get和post的区别**

（本质都是TCP连接）

get参数通过url传递 post参数被放在请求体
get在url传递的参数有限 post没有这个要求
get参数直接暴露在url中 没有post安全
get请求只能进行url编码 post支持多种编码方式
get产生一个TCP数据包 （header和data一起）post产生两个（分开）。

**http和https的区别**

1.https协议需要到CA申请证书，可能需要一定的费用；且https的握手时段延时更高。
2.http是超文本传输协议，信息是明文传输。https则是具有安全性的ssl加密传输协议
3http和https采用不同的连接方式，http用80端口，https用443端口
http连接简单，无状态。https使由http+SSL（SSL也有握手，协商加密使用的对称密钥）构建的可进行加密传输、身份认证的网络协议

**http传输步骤**

注意：http以文本形式传输

\1. 客户端连接到Web服务器
一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。例如，[http://www.baidu.com](http://www.baidu.com/)。

\2. 发送HTTP请求
通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。

\3. 服务器接受请求并返回HTTP响应
Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。

\4. 释放连接TCP连接
若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;

\5. 客户端浏览器解析HTML内容
客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。

![](E:\QQis_here\1264947688\FileRecv\MobileFile\media\16156537933854.jpg)

**URL**

统一资源定位符。



tcp：
流量控制：滑动窗口
拥塞控制：慢启动、拥塞避免、快速回复。

tcp为什么是可靠的？怎么保证？
校验和，序列号，定时器，确认问答，快重传（三个冗余ACK则重新发送）



每台主机ARP缓冲区里面有ARP列表。本地网发起ARP请求的广播包。如果目的ip与自己的ip地址一致，就发送一个ARP响应包（单播应答）。

ICMP协议：因特网控制信息协议
功能：1.确认ip包是否成功到达目标地址
2.通知在发送过程中ip包被丢弃的原因



**ICMP协议的作用是什么？**
ICMP协议是TCP/IP协议的一个子协议。用在IP主机、路由器之间传递控制消息，控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。

这些控制消息虽然不传递用户数据，但是对于用户数据的传输起着重要的作用。

**关于数据链路层**
数据链路层(data link layer)通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。 在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装程帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。

**TCP传输的可靠性**

排序，丢弃，重发。

https://blog.csdn.net/nicolelili1/article/details/103951526



**传输层和数据链路层异同点**

差错检测、流量控制、拥塞控制（缓冲）、顺序性。

但相比之下，链路层没有那么繁琐的建立连接的步骤，只需要保证数据按顺序按时交付即可。并且建立一条连接的过程很简单。

两层都需要缓冲和流量控制，对于链路层而言，缓冲区是有用的；对于传输层而言，存在大量的连接并且每个连接获得的带宽是可变的，因此缓冲区的思路不再适用。

https://www.cnblogs.com/yeni/p/11453966.html



**带宽**

"带宽"是由英文词汇**bandwidth**直译过来的。而在不同的领域，对带宽的理解角度也有所不同。

　　1、电子通信领域：指某个信号具有一定的**频带宽度**。也就是说，信号的带宽指的是该信号所包含的不同频率成份所占据的频率范围。

　　**注意**：频带是相对基带而存在的概念，指的是经过调制后能在信道上进行传输通信的信号所占据的频率范围，一般我们也称**通频带**。

　　2、计算机网络领域：指网络系统的通信**链路**（与信道或者传输媒体同意）传输数据的能力，即表征单位时间内从网络中的某一点到另一点所能通过的"**最高数据率**"。

　　**注意**：计算机网络中的"带宽"和"吞吐量"两个词容易混淆，区别如下：

　　2.1）网络带宽（bandwidth）：强调网络最大的数据传输速率，即传输数据率理论峰值。

　　2.2）网络吞吐量（throughput）：强调网络实际的数据传输速率。　　









**TCP/IP协议栈分层？**

约定俗成是5层，但实际上可以是4层。

https://blog.csdn.net/feiyangtianyao/article/details/102513786

**每个层作用？**

https://blog.csdn.net/hanchaoman/article/details/36186647

![img](https://img-blog.csdn.net/20180111100303706?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFuemhlbjc1NDE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

https://blog.csdn.net/hanzhen7541/article/details/79030748

网络层的核心：就是路由器的功能，上面的几个功能，比如路由，存储转发，拥塞控制，呼叫准入。

![image-20210319234042393](C:\Users\FuNgaiKa\AppData\Roaming\Typora\typora-user-images\image-20210319234042393.png)



**为什么计算机网络要分层？**

https://blog.csdn.net/kerin_lu/article/details/11808481



**DNS（域名系统）解析**

例子：在hosts填上github的ip（查找比较快的ip）

-计网书P87

1.递归查询

2.迭代查询

![这里写图片描述](https://img-blog.csdn.net/20170729145712521?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzMwOTg3MA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

1.域名解析器

2.域名服务器



**MAC和IP地址**

MAC：数据链路层，类比身份证。

IP：网络层，类比户口本地址。



**TCP/IP四层模型及其协议**

链路层：MAC,VLAN

网络层：IP ARP ICMP

传输层：TCP UDP

应用层：HTTP DNS  FTP



**数字证书是什么？**

**了解非对称加密算法和对称加密算法吗？**

