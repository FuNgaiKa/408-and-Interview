*第一章*：

位于应用层的信息分组称为*报文*。
位于运输层的分组称为*报文段*。
网络层：*数据报*
链路层分组：*帧*。  

端系统通过*通信链路*链接到一起。
传输速率和传播速率。

分组交换机有两种：
链路层交换机：接入网
路由器：网络核心

路径
ISP： 互联网服务提供商。端系统通过它接入因特网
TCP：传输控制协议
IP：网际协议

主机=端系统
主机：客户和服务器
数据中心：有很多台服务器

接入网：将端系统物理连接到其*边缘路由器（第一台路由器）*的网络。

DSL：数字用户线

接入网种类：
1.铜线接入
2.光纤接入
3.光纤/同轴电缆混合接入（HFC）
4.无线接入

分组交换：
1.存储转发传输。传输时延
3.转发表和路由选择协议
    路由选择协议：自动的设置这些转发表
    
电路交换：
（类比餐厅预约点菜）
频分复用/时分复用

时延的类型：
1.处理时延：检查分组首部等
2.排队时延：在链路上等待传输
3.传输时延：等前面的分组传输之后，再传输当前的分组
4.传播时延：路上的时间

排队时延和丢包：
流量强度太大时：丢弃该分组 即该分组会丢失

吞吐量：接受文件的速率

*第二章*：

P2P与C/S

HTTP：超文本传输协议
HTTP：
客户与服务器经过交换HTTP报文进行会话
web页面由对象组成
web浏览器：http客户端
web服务器：http服务器
http请求报文 http响应报文

发起与服务器的tcp连接 然后进程可以通过套接字接口访问tcp 

http是一个*无状态协议*。

非持续连接 持续连接
RTT：往返时间

三次握手
总的响应时间=RTT*2 + 服务器传输HTML文件的时间

http的get报文、响应报文

cookie：抽取首部中的识别码（识别码即与信息相关联）
缓存的计算题
CDN：内容分发网络

电子邮件主要组成部分：用户代理、邮件服务器和SMTP
SMTP：简单邮件传输协议
SMTP客户端和SMTP服务端之间的：TCP连接

邮箱服务器里面的邮箱：即用户代理

SMTP与HTTP的对比：
1.SMTP是推协议 HTTP是拉协议
2.SMTP要求ascii码模式 HTTP没有这种限制
3.封装对象：SMTP在放他在一个报文中 HTTP放他在HHTP响应报文中

POP3:第三版的邮局协议
IMAP：因特网邮件访问协议

DNS：域名系统：主机名到IP地址转换

DNS服务器：分布式、层次数据库
1.根DNS服务器
2.顶级域服务器 顶级域都有TLD服务器
3.权威DNS服务器
请求主机->本地DNS服务器（可以缓存一些网址的ip地址）

1.递归查询
2.迭代查询

*第三章*：
基本的两种协议：TCP和UDP
TCP：传输控制协议
UDP：用户数据报协议

多路复用和分解：将主机间交付扩展到进程间交付

TCP：
1.可靠数据传输 rdt1.0到rdt3.0
rdt2.0:增加了ARQ及其另外三种协议（停止等待：不会发送新数据）
   3.0:增加了倒计时计时器
2.拥塞机制

套接字：进程与网络传递数据的门户（每个套接字有唯一的标识符）

多路分解：将运输层报文段中的数据交付到正确的套接字的工作
多路复用：在源主机不同套接字中收集数据块，封装首部信息后生成报文段，再传递到网络层

UDP套接字：二元组（目的IP地址和目的端口号）
TCP套接字：四元组（源IP地址和源端口号、目的IP地址和目的端口号）

FSM：有限状态机 

ARQ：自动重传请求协议
1.差错检测2.接受方反馈3.重传

bps：传输时延的速度单位

解决流水线的差错恢复：
1.回退N步（GBN）
2.选择重传（SR）
（两者都有超时）

TCP的差错恢复：
1.超时间隔加倍
2.快速重传 3次冗余ACK

可靠数据传输机制：检验和、定时器、序号、确认、否定确认、窗口、流水线。

TCP：建立连接三次握手和断开连接的四次握手
TCP仅仅支持单播，不支持广播和多播

![](media/16004016411451.png)


OSI七层结构：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层


![](media/16004018850472.png)

API：应用编程接口，用于设置IP地址、端口号，并实现数据的发送和接收


![](media/16004020221717.png)

回卷：最前面的一个位如果要进位 则放到最后一个位进

MSS：最大报文段长度
MTU：最大传输单元

telnet：序号和确认号

EWMA：指数加权移动平均 （预测 估计RTT）


TCP的流量控制：
1.滑动接收窗口

![](media/16004048878312.png)

TCP的拥塞机制：（加性增 乘性减：AIMD）
1.慢启动
2.拥塞避免
3.快速恢复

两种：Tahoe Reno

![](media/16004053642436.png)


![](media/16004054317479.png)

这个是Tahoe的 ssthresh减少到一半 然后从1开始慢启动 Reno的话从1.5*ssthresh开始进行拥塞避免

TCP的*公平性*
TCP首部🈶️：源端口号、目的端口号、序号（seq）、确认号（ack）。

*第四章*：
网络层（尽力而为服务）
1.数据平面
2.控制平面 远程控制器计算和分发转发表给路由器使用
SDN：软件控制网络

网络层功能：1.转发 2.路由选择（路由选择算法）
路由器：转发表

分组交换机：1.链路层交换机 2.路由器

最长前缀匹配规则

NAT：网络地址转换

HOL阻塞：线路前部阻塞
1.输入排队 2.输出排队


![](media/16004159438941.png)

一个4000字节的数据报：20字节IP首部和3980字节IP有效载荷

子网：3个主机接口和1个路由器接口的网络形成一个子网（以及，隔离的网络中的每一个都构成子网）


![](media/16004164136328.png)



子网掩码：2:3.1.1.0/24（最左侧24比特定义了子网地址）

CIDR：无类别域间路由选择 （因特网的地址分配策略） （网络前缀）

DHCP：动态主机配置协议
作用：集中管理、分配IP地址，使得用户动态获得IP地址、DNS服务器地址等信息

获取一块地址：
1.ISP提供一些地址 与前缀有关
2.DHCP协议分配 临时的IP地址

DHCP的四个步骤：
1.广播发送。DHCP服务器发现。端口67。
2.DHCP服务器提供IP地址。
3.DHCP请求
4.DHCP ACK
（相当于四次握手）


![](media/16004174483209.png)


NAT：网络地址转换
（相当于一道屏障 把后面的子网里面的主机地址给隐藏了）
*NAT转换表*

发的时候源端口号会改变 接收的时候目的端口号也会改变

OpenFlow：匹配加动作操作
*例题*

*第五章*

路由器的本地数据平面转发：
1.转发表
2.流表

路由器功能：
第一，网络互连，路由器支持各种局域网和广域网接口，主要用于互连局域网和广域网，实现不同网络互相通信；
第二，数据处理，提供包括分组过滤、分组转发、优先级、复用、加密、压缩和防火墙等功能；
第三，网络管理，路由器提供包括配置管理、性能管理、容错管理和流量控制等功能。

CA：控制代理

路由选择算法：
1.LS（链路状态）算法 
dijkstra算法
（需要全局信息）
2.DV（距离向量）算法
（仅仅与隔壁的邻居交谈）

AS：自治系统

*因特网是ISP的网络，其中每个ISP都有它自己的路由器网络

路由选择协议：
1.OSPF（开放最短路优先）：AS内部路由选择协议
2.BGP（边界网关协议）（在因特网协议中重要性仅次于IP协议）

内网关：OSPF、RIP协议（找路）
外网关：BGP（找信息）

RIP：选路信息协议（DV）
OSPF：AS里面的最短路径（dikjstra）
跨越AS的BGP连接：eBGP
AS内部的BGP连接：iBGP

BGP：next-hop、aspath、目的前缀

BGP：1.热土豆路由选择
2.路由器选择算法

ICMP协议的功能主要有： 

1. 确认IP包是否成功到达目标地址 
2. 通知在发送过程中IP包被丢弃的原因 

SDN：软件定义网络
![](media/16004425478732.jpg)

*第六章*

物理地址是数据链路层和物理层使用的地址；IP地址是网络层及其以上层使用的地址。

IP地址：我在哪里 门牌号 结构化
MAC地址：我是谁 身份证 扁平化 

检测差错的3种技术：
1.奇偶校验
2.检验和方法

3.循环冗余检测编码（CRC）
减法操作注意：抑或XOR

3种多路访问协议：
1.信道划分协议
有三种。CDMA（码分多址）给节点分配一种不同的编码。
2.随机接入协议。
时隙ALOHA。完全ALOHA。CSMA（载波侦听多路访问）
3.轮流协议：轮询协议


CSMA：
1.载波侦听
2.冲突检测
信道传播时延影响很大

LAN：局域网。使用链路层协议，其中一部分是多路访问协议

LAN的地址。MAC（媒体访问控制地址） 

除了需要IP地址还需要MAC地址的原因：MAC地址是中立的 还可以支持其他的网络协议

3种不同的地址类型：1.应用层的主机名
2.网络层的IP地址
3.链路层的MAC地址

ARP协议：地址解析协议。用于将IP地址解析为LAN地址
类比：DNS将主机名解析到IP地址。区别在于：DNS为因特网中任意的主机解析主机名；ARP只为在同一个LAN上的节点解析IP地址。

ARP：有ARP表（包括一个生存期TTL表 ）。发送节点构造一个称为ARP分组的特殊分组发出去。

在两个局域网LAN中传输数据时，用到ARP查询到中间路由器的IP所对应的MAC（通过发送节点的ARP表），一步步传送到终点。

以太网：数据字段、目的地址、源地址、类型字段、循环冗余检测（CRC）
注意⚠️：以太网跟IP数据报服务、UDP服务一样，是不可靠的无连接服务

以太网多路访问协议的*指数后退*。

efficiency:1/(1+(5*tprop/ttrans)).


VLAN：虚拟局域网

交换机的交换表中储存的是：接口和MAC地址的映射（过滤、转发）

交换机：自学习。即插即用。

第二层交换机：交换机
第三层交换机：路由器

路由器、交换机：流量隔离，广播风暴，即插即用。


回顾：Web页面请求的过程。
1.便携机与网络相连，运行DHCP协议获得IP地址。
2.DHCP客户记录下它的IP地址和它的DNS服务器的IP地址
3.获得IP地址就可以开始键入。生成TCP套接字开始发送HTTP请求。
不知道网址的IP，需要用到DNS查询。
期间不知道MAC地址的话使用ARP协议。
4.获得目的IP之后，开始先TCP三次握手。
5.发送HTTP请求报文，收到HTTP响应报文。读取到网页。（注意http请求报文就是数据的一部分）

*第七章*
WiFi：IEEE802.11

AP：接入点（即中央基站）
BSS：基本服务集 包括一个或多个无线站点和一个AS

SSID：服务集标识

信标帧
被动扫描：自AP发信标帧  关联请求 关联响应
主动扫描：广播探测请求帧 探测响应  关联请求 关联响应

移动管理：
归属网络：归属代理 
外部网络：外部代理
转交地址

1.移动节点的间接路由选择
2.直接路由选择

COA：转交地址
永久地址、外部地址（COA）

GSM：全球移动通信系统
MSC：移动交换中心

有线链路和无线链路的区别：
1.递减的信号强度
2.来自其它源的干扰
3.多径传播

隐藏终端问题。

*第八章*
安全通信的四个特性：
1.机密性
2.报文完整性（报文鉴别）
3.端点鉴别
4.运行安全性

密钥Ka 以及Ka（m）
以及解密算法的密钥Kb

对称密钥系统：两人密钥相同并且是秘密的
公开密钥系统：一对密钥是全世界都知道；另一对是其中一个人知道

*报文完整性和数字签名。
报文鉴别码（MAC）：其实就是哈希函数

数字签名：
公开密钥系统可以完成。

网络安全协议：IPSec、SSL

公钥认证：认证中心（CA） 提供证书

端点鉴别：
*鉴别协议：从1.0到4.0
4.0:利用不重数来判断是否活跃（类似于三次握手）

数字签名有一点像私钥。

SSL：安全套接字层。
SSL版本3的一个稍加修改的版本：TLS（运输层安全性）

SSL连接：
1.握手后生成主密钥
2.


IP安全协议：IPSec
VPN：虚拟专用网

防火墙：硬件和软件的结合体（过滤）
TTL：生存时间值
IDS：入侵检测系统
