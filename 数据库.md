*主键*

sql：一种语言
mysql：数据库管理软件

sql对大小写不敏感：select==SELECT

*是选取所有列的快捷方式

select distinct 用于返回唯一不同的值（所有列的值都相同时，两个行才算是相同）

where 语句

order by：
根据指定的列对结果集进行排序
默认按照“升序”进行排序

ASC：升序
DESC：降序
LIMIT：限制返回的行数

insert into：
记得先添加主键

update：修改表中的数据
UPDATE world.country SET Name ='xiaoweige' WHERE Code='ABC';
修改了name这里

delete：
用于删除表中的行

*sql分类*
DDL：数据定义语言
主要功能是定义数据库对象
核心指令：create,alter,drop

DML：数据操纵语言
主要功能：访问数据
insert，update，select，delete（增删查改）

TCL事物控制语言
DCL数据控制语言

*sql函数*


![](media/16153549368833.jpg)

AS：
select 列名 from 表名 as 别名；

主键 超键 候选键 外键

sql中join里面：on和where的区别

*一条sql语句执行得很慢的原因*
两种情况：
1.数据库刷新脏页 遇到锁
2.没有用到索引 数据库选错了索引

数据库一个逻辑执行单元如何才能被称得上是一个事务？必须满足的性质？


![](media/16154610815940.jpg)

内连接、外连接。
左外连接、右外连接、全外连接。

![img](https://image-static.segmentfault.com/276/780/2767807589-5c122586a23c4_fix732)



**索引**

**主键、超键、候选键、外键**

https://blog.csdn.net/jerry11112/article/details/78160771



**sql语句执行很慢的原因**

https://zhuanlan.zhihu.com/p/62941196

-帅地



**非主键索引、主键索引**
主键索引:聚簇索引

https://mp.weixin.qq.com/s/RemJcqPIvLArmfWIhoaZ1g



**聚集索引\非聚集索引**

字典的按拼音和按偏旁。



聚集索引不适用于：

   • 频繁更改的列 。这将导致整行移动（因为 SQL Server 必须按物理顺序保留行中的数据值）。这一点要特别注意，因为在大数据量事务处理系统中数据是易失的。





**为什么使用B+树而不是B树？**

https://blog.csdn.net/zhoucheng05_13/article/details/79825246

使用B+树的好处：
由于B+树的内部节点只存放键，不存放值，因此，一次读取，可以在内存页中获取更多的键，有利于更快地缩小查找范围。
B+树的叶节点由一条链相连，因此，当需要进行一次全数据遍历的时候，B+树只需要使用O(logN)时间找到最小的一个节点，然后通过链进行O(N)的顺序遍历即可。而B树则需要对树的每一层进行遍历，这会需要更多的内存置换次数，因此也就需要花费更多的时间
使用B树的好处：
B树可以在内部节点同时存储键和值，因此，把频繁访问的数据放在靠近根节点的地方将会大大提高热点数据的查询效率。这种特性使得B树在特定数据重复多次查询的场景中更加高效。

数据库为什么使用B+树而不是B树？
因为就是上面提到的B+树的好处。数据库的数据读取都是需要进行代价巨大的磁盘IO操作，因此，更快地缩小范围和更少的读取次数是数据库需要关注的重点。而B+树在这些点上比B树做的更好。这就是为什么数据库要选用B+树作为底层实现。
————————————————
版权声明：本文为CSDN博主「Star_Ship」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/zhoucheng05_13/article/details/79825246









**事务**

指的是满足ACID特性的一组操作，通过commit提交一个事务，也可以用rollback进行回滚。



**ACID**

1.原子性 

2.一致性 

3。隔离性

4.持久性



**并发一致性问题**

1.丢失修改

2.读脏数据（中间插入）

3.不可重复读

3.幻影读（中间插入）



**封锁协议（解决并发一致性问题）**

1.一级封锁协议：不能有两个事务对同一个数据进行修改。

2.二级

3.三级



**隔离级别**

1.未提交读

2.提交读

3.可重复读

4.可串行化

（用来解决并发一致性问题）



**MVCC：多版本并发控制**

undo日志：回滚日志

redo日志：重做日志

用于实现提交读和可重复读两种隔离级别。

版本快照。

**版本号**

系统版本号：SYS_ID

事务版本号:TRX_ID



**READVIEW结构**

包含当前系统未提交的事务列表TRX_IDs

以及列表的最小值和最大值。

（三种分类讨论）

根据undo log的回滚指针ROLL_PTR找到下一个快照，再进行上面的判断。



**Next-Key Locks**

使用MVCC和Next-Key Locks解决幻影读问题。

1.锁定一个记录上面的索引（Record Locks）

2.锁定索引之间的间隙，但不包含索引本身。（Gap Locks）







**几种数据库引擎的比较**

https://www.jianshu.com/p/4bb9f78b4f6d

**各种引擎的比较**

https://blog.csdn.net/qq_31964815/article/details/70256223

innodb（聚集索引）和myisam（非聚集索引）都使用b+树。

innodb：提供外键、事务、回滚

myisam：不提供外键和事务



**封锁类型：**

1.读写锁

2.共享锁



**关系型数据库设计理论**

1.函数依赖

部分函数依赖；完全函数依赖；传递函数依赖

2.异常

3.范式：为了解决以上提到的4种异常



**主要有四种异常**：（不符合范式的缘故）

1.冗余数据

2.修改异常

3.删除异常

4.插入异常



**范式**

码（类似主键）；主属性；非主属性。

1NF:属性不可分。

2NF:非主属性没有部分依赖。

3NF:不存在传递函数依赖

https://www.zhihu.com/question/24696366/answer/29189700
